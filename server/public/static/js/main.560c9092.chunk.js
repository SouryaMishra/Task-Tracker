(this["webpackJsonptask-tracker"]=this["webpackJsonptask-tracker"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,c){},function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),i=c(8),r=c.n(i),a=(c(14),c(5)),o=c(3),l=c(2),d=c(9),u="http://localhost:5000/api/tasks",j={todo:0,"in-progress":1,completed:2},h={Highest:5,High:4,Medium:3,Lowest:2,Low:1},f={Highest:"#f40505",High:"#ff920b",Medium:"#aaaaaa",Low:"#52c41a",Lowest:"#1890ff"},b=function(e,t){switch(t.type){case"FETCH_ALL_TASKS":return t.payload.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{isSelected:!1})}));case"ADD_TASK":return[].concat(Object(d.a)(e),[Object(o.a)({},t.payload)]);case"UPDATE_TASK":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"UPDATE_TASKS":var c=t.payload.map((function(e){return e.id}));return e.map((function(e){return c.includes(e.id)?t.payload.find((function(t){return t.id===e.id})):e}));case"REMOVE_TASK":return e.filter((function(e){return e.id!==t.payload}));case"REMOVE_TASKS":return e.filter((function(e){return!t.payload.includes(e.id)}));case"TOGGLE_SELECTION":return e.map((function(e){return e.id===t.payload?Object(o.a)(Object(o.a)({},e),{},{isSelected:!e.isSelected}):Object(o.a)({},e)}));case"CLEAR_SELECTION":return e.map((function(e){return e.status===j[t.payload]&&e.isSelected?Object(o.a)(Object(o.a)({},e),{},{isSelected:!e.isSelected}):Object(o.a)({},e)}));case"SORT_BY":var n=t.payload,s=n.flag,i=n.status,r=e.filter((function(e){return e.status===j[i]}));return r.length>0?(r.sort((function(e,t){return"asc"===s?h[e.priority]-h[t.priority]:h[t.priority]-h[e.priority]})),e.filter((function(e){return e.status!==j[i]})).concat(r)):e;default:return e}};function O(){var e=Object(n.useReducer)(b,[]),t=Object(l.a)(e,2),c=t[0],s=t[1],i=Object(n.useState)(!1),r=Object(l.a)(i,2),a=r[0],o=r[1],d=Object(n.useRef)(!1),j=Object(n.useCallback)((function(e){switch(e.type){case"FETCH_ALL_TASKS_ASYNC":fetch(u).then((function(e){return e.json()})).then((function(e){d.current&&(o(!1),s({type:"FETCH_ALL_TASKS",payload:e}))})).catch((function(e){o(!1),console.log(e)}));break;case"ADD_TASK_ASYNC":(n=e.payload,fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()}))).then((function(e){d.current&&s({type:"ADD_TASK",payload:e})})).catch((function(e){return console.log(e)}));break;case"UPDATE_TASK_ASYNC":(function(e){return fetch("".concat(u,"/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))})(e.payload).then((function(e){d.current&&s({type:"UPDATE_TASK",payload:e})})).catch((function(e){return console.log(e)}));break;case"UPDATE_TASKS_ASYNC":(function(e){return Promise.all(e.map((function(e){return fetch("".concat(u,"/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))})))})(e.payload).then((function(e){d.current&&s({type:"UPDATE_TASKS",payload:e})})).catch((function(e){return console.log(e)}));break;case"REMOVE_TASK_ASYNC":(c=e.payload,fetch("".concat(u,"/").concat(c),{method:"DELETE"}).then((function(e){return e.json()}))).then((function(){d.current&&s({type:"REMOVE_TASK",payload:e.payload})})).catch((function(e){return console.log(e)}));break;case"REMOVE_TASKS_ASYNC":(t=e.payload,Promise.all(t.map((function(e){return fetch("".concat(u,"/").concat(e),{method:"DELETE"}).then((function(e){return e.json()}))})))).then((function(){d.current&&s({type:"REMOVE_TASKS",payload:e.payload})})).catch((function(e){return console.log(e)}));break;default:return}var t,c,n}),[]),h=Object(n.useMemo)((function(){return{tasks:c,dispatch:s,asyncDispatch:j}}),[c,s,j]);return Object(n.useEffect)((function(){return d.current=!0,function(){return d.current=!1}}),[]),Object(n.useEffect)((function(){console.log("Loading..."),o(!0),j({type:"FETCH_ALL_TASKS_ASYNC"})}),[j]),{tasks:c,dispatch:s,isLoading:a,value:h}}function m(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){var e;c?document.body.classList.add("modal-shown"):(document.body.classList.remove("modal-shown"),null===(e=document.querySelector(".nav-menu"))||void 0===e||e.classList.remove("visible"))}),[c]),[c,s]}var p=c(25),v=(c(15),c(0));var x=function(e){var t=Object(n.useState)(""),c=Object(l.a)(t,2),s=c[0],i=c[1],r=Object(n.useContext)(T),a=r.tasks,o=r.asyncDispatch,d=Object(n.useRef)(null),u=Object(n.useRef)(""),j=Object(n.useRef)("");Object(n.useEffect)((function(){var t;null===(t=d.current)||void 0===t||t.classList.add("visible"),u.current.value=e.title,j.current.value=e.priority}),[e.title,e.priority]);var h=function(){var t;null===(t=d.current)||void 0===t||t.classList.remove("visible"),setTimeout(e.closeModal,250)};return Object(v.jsx)("div",{className:"modal",onClick:h,children:Object(v.jsxs)("div",{ref:d,className:"modal-window",onClick:function(e){return e.stopPropagation()},children:[Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h1",{children:e.heading}),Object(v.jsx)("button",{className:"btn-close",onClick:h,children:Object(v.jsx)("i",{className:"fas fa-times"})})]}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsxs)("div",{className:"modal-content",children:[s&&Object(v.jsx)("p",{className:"error-text",children:s}),Object(v.jsxs)("form",{className:"form-edit",autoComplete:"off",children:[Object(v.jsxs)("div",{className:"form-control",children:[Object(v.jsx)("label",{htmlFor:"title",children:"Description"}),Object(v.jsx)("textarea",{ref:u,id:"title",rows:4,maxLength:250,onChange:function(e){""===e.target.value.trim()?i("Please enter a task description"):i("")}})]}),Object(v.jsxs)("div",{className:"form-control",children:[Object(v.jsx)("label",{htmlFor:"priority",children:"Priority"}),Object(v.jsxs)("select",{ref:j,id:"priority",className:"select-priority",children:[Object(v.jsx)("option",{value:"Highest",children:"Highest"}),Object(v.jsx)("option",{value:"High",children:"High"}),Object(v.jsx)("option",{value:"Medium",children:"Medium"}),Object(v.jsx)("option",{value:"Low",children:"Low"}),Object(v.jsx)("option",{value:"Lowest",children:"Lowest"})]})]})]})]}),Object(v.jsx)("div",{className:"modal-footer",children:Object(v.jsxs)("div",{className:"form-actions",children:[Object(v.jsx)("button",{className:"btn",onClick:function(){var t=u.current.value,c=j.current.value;if(""!==t.trim())if(h(),e.taskId){var n=a.find((function(t){return t.id===e.taskId}));n&&o({type:"UPDATE_TASK_ASYNC",payload:{id:e.taskId,title:t,priority:c,status:n.status,isSelected:n.isSelected}})}else o({type:"ADD_TASK_ASYNC",payload:{id:Object(p.a)(),title:t,status:0,priority:c,isSelected:!1}});else i("Please enter a task description")},children:"Save Changes"}),Object(v.jsx)("button",{className:"btn btn-cancel",onClick:h,children:"Cancel"})]})})]})})};var g=function(){var e=m(),t=Object(l.a)(e,2),c=t[0],n=t[1];return Object(v.jsx)("header",{className:"header",children:Object(v.jsxs)("div",{className:"content",children:[Object(v.jsx)("h1",{className:"app-title",children:"Task Tracker"}),c&&Object(v.jsx)(x,{title:"",priority:"Medium",closeModal:function(){return n(!1)},heading:"Add task"}),Object(v.jsxs)("button",{className:"btn btn-add-task",onClick:function(){return n(!0)},children:[Object(v.jsx)("i",{className:"fas fa-plus"})," \xa0 Add Task"]})]})})};c(17);var y=function(e){var t=Object(n.useRef)(null),c=Object(n.useRef)(null);return Object(v.jsxs)("div",{className:"".concat(e.isCategory?"category ":"","menu"),onClick:function(e){var n,s;document.querySelectorAll(".show-menu").forEach((function(e){e!==c.current&&e.classList.remove("show-menu")})),document.querySelectorAll(".btn-options").forEach((function(e){e!==t.current&&e.classList.remove("active")})),null===(n=c.current)||void 0===n||n.classList.toggle("show-menu"),null===(s=t.current)||void 0===s||s.classList.toggle("active")},onMouseDown:function(e){e.stopPropagation()},children:[Object(v.jsx)("button",{ref:t,className:"".concat(e.isCategory?"category ":"","btn-options"),children:Object(v.jsx)("i",{className:"fas fa-ellipsis-v"})}),Object(v.jsx)("ul",{ref:c,className:"".concat(e.isCategory?"category ":"","menu-list"),children:e.children})]})};c(18);var k=function(e){var t=m(),c=Object(l.a)(t,2),s=c[0],i=c[1],r=e.id,a=e.title,o=e.priority,d=e.status,u=e.isSelected,j=Object(n.useContext)(T),h=j.dispatch,b=j.asyncDispatch,O=Object(n.useRef)(null);return Object(v.jsxs)(v.Fragment,{children:[s&&Object(v.jsx)(x,{taskId:r,title:a,priority:o,closeModal:function(){return i(!1)},heading:"Edit task"}),Object(v.jsxs)("div",{ref:O,id:"id-".concat(r),"data-type":"task-item",className:"task-item",draggable:"true",onDragStart:function(e){e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",JSON.stringify({taskItemId:e.target.id,innerHTML:e.target.innerHTML})),e.target.classList.add("dragging")},onDragEnd:function(e){e.target.classList.remove("dragging")},children:[Object(v.jsxs)("div",{className:"task-item-header",children:[Object(v.jsx)("input",{id:"checkbox-".concat(r),className:"task-item-checkbox",type:"checkbox",checked:u,onChange:function(e){return function(e){h({type:"TOGGLE_SELECTION",payload:e})}(r)}}),Object(v.jsx)("label",{htmlFor:"checkbox-".concat(r)}),Object(v.jsx)("div",{className:"task-actions",children:Object(v.jsxs)(y,{id:r,isCategory:!1,children:[Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){i(!0)},children:"Edit"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){b({type:"REMOVE_TASK_ASYNC",payload:r})},children:"Remove"})}),0===d?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return e.moveTask(r,"in-progress")},children:"Move to In Progress"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return e.moveTask(r,"completed")},children:"Move to Completed"})})]}):1===d?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return e.moveTask(r,"todo")},children:"Move to To do"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return e.moveTask(r,"completed")},children:"Move to Completed"})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return e.moveTask(r,"in-progress")},children:"Move to In Progress"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return e.moveTask(r,"todo")},children:"Move to To do"})})]})]})})]}),Object(v.jsx)("div",{className:"task-item-body",children:Object(v.jsx)("h1",{className:"task-title",children:a.length>120?a.substring(0,120)+"...":a})}),Object(v.jsx)("div",{className:"task-item-footer",children:Object(v.jsxs)("div",{className:"priority-container",children:[Object(v.jsx)("div",{className:"indicator",style:{background:f[o]}}),Object(v.jsx)("p",{children:o})]})})]})]})};c(19);var S=function(e){var t=Object(n.useContext)(T),c=t.tasks,s=t.dispatch,i=t.asyncDispatch,r=Object(n.useState)(!1),a=Object(l.a)(r,2),d=a[0],u=a[1],h=function(e,t){var n=c.find((function(t){return t.id===e}));n&&(n.status=j[t],i({type:"UPDATE_TASK_ASYNC",payload:n}))},f=function(t,c){i({type:"UPDATE_TASKS_ASYNC",payload:e.tasks.filter((function(e){return e.status===j[t]&&e.isSelected})).map((function(e){return e.status=j[c],e}))})},b=function(e,t){s({type:"SORT_BY",payload:{status:e,flag:t}})},O=e.tasks.filter((function(e){return e.isSelected})).length;return Object(v.jsxs)("div",{id:e.id,"data-drop":"drop",className:"task-category".concat(d&&e.isMatching?" collapsed":""),onDrop:function(e){var t=JSON.parse(e.dataTransfer.getData("text/plain"));"drop"===e.target.getAttribute("data-drop")&&h(t.taskItemId.substring(3,t.taskItemId.length),e.currentTarget.id)},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="drop"===e.target.getAttribute("data-drop")?"move":"none"},children:[Object(v.jsxs)("div",{className:"task-category-header",children:[Object(v.jsx)("h1",{children:"todo"===e.id?"To do":"in-progress"===e.id?"In Progress":"Completed"}),Object(v.jsx)("p",{className:"count",children:e.tasks.length}),0===e.tasks.length||e.isMatching&&d||Object(v.jsxs)(y,{id:e.id,isCategory:!0,children:[Object(v.jsx)("li",{className:"list-heading",children:Object(v.jsx)("span",{children:"Sort by priority"})}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return b(e.id,"desc")},children:"High to Low"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return b(e.id,"asc")},children:"Low to High"})}),O>0&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("li",{className:"list-heading",children:Object(v.jsxs)("span",{children:[O," ",1===O?"task":"tasks"," selected"]})}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return t=e.id,void s({type:"CLEAR_SELECTION",payload:t});var t},children:"Clear Selection"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return t=e.id,void i({type:"REMOVE_TASKS_ASYNC",payload:e.tasks.filter((function(e){return e.status===j[t]&&e.isSelected})).map((function(e){return e.id}))});var t},children:"Remove Selected"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return f(e.id,"in-progress")},children:"Move Selected to In Progress"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(){return f(e.id,"completed")},children:"Move Selected to Completed"})})]})]}),e.isMatching&&Object(v.jsx)("button",{className:"btn-toggle",onClick:function(e){u((function(e){return!e}))},children:Object(v.jsx)("i",{className:"fas fa-chevron-down"})})]}),Object(v.jsx)("div",{className:"task-category-body","data-drop":"drop",children:e.tasks.map((function(t){return Object(v.jsx)(k,Object(o.a)(Object(o.a)({},t),{},{toggleSelection:e.toggleSelection,moveTask:h,removeTask:e.removeTask,handleSave:e.handleSave}),t.id)}))})]})};c(20);var C=function(e){var t=Object(n.useRef)(null),c=Object(n.useMemo)((function(){return function(e){var t,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];t&&clearTimeout(t),t=setTimeout((function(){e.apply(void 0,s),t=null}),c)}}((function(t){e.setFilters("title",t.target.value)}),800)}),[]);return Object(v.jsx)("div",{className:"filter-container",children:Object(v.jsxs)("form",{className:"filter-form",autoComplete:"off",children:[Object(v.jsx)("div",{children:Object(v.jsx)("input",{ref:t,id:"search",className:"search-task-input",type:"search",placeholder:"Search Task",onChange:c})}),Object(v.jsxs)("div",{className:"inline-controls",children:[Object(v.jsx)("label",{htmlFor:"status",children:"Status"}),Object(v.jsxs)("select",{id:"status",className:"select",value:e.filters.status,onChange:function(t){e.setFilters("status",t.target.value)},children:[Object(v.jsx)("option",{value:"",children:"All"}),Object(v.jsx)("option",{value:"todo",children:"To do"}),Object(v.jsx)("option",{value:"in-progress",children:"In Progress"}),Object(v.jsx)("option",{value:"completed",children:"Completed"})]}),Object(v.jsx)("label",{htmlFor:"priority",children:"Priority"}),Object(v.jsxs)("select",{id:"priority",className:"select",onChange:function(t){e.setFilters("priority",t.target.value)},children:[Object(v.jsx)("option",{value:"",children:"All"}),Object(v.jsx)("option",{value:"highest",children:"Highest"}),Object(v.jsx)("option",{value:"high",children:"High"}),Object(v.jsx)("option",{value:"medium",children:"Medium"}),Object(v.jsx)("option",{value:"low",children:"Low"}),Object(v.jsx)("option",{value:"lowest",children:"Lowest"})]}),Object(v.jsx)("button",{className:"btn",onClick:function(c){c.preventDefault(),t.current.value="",e.clearFilters()},children:"Clear Filters"})]})]})})};c(21);var N=function(e){var t=Object(n.useRef)(null);Object(n.useEffect)((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.classList.add("visible")}),[]);var c=function(e,t){s();var c=document.querySelector("#".concat(t));c&&document.documentElement.scrollTo({top:c.offsetTop-216,behavior:"smooth"})},s=function(){var c;null===(c=t.current)||void 0===c||c.classList.remove("visible"),setTimeout(e.closeModal,200)};return Object(v.jsx)("div",{className:"nav-menu-container",onClick:s,children:Object(v.jsxs)("ul",{ref:t,className:"nav-menu",onClick:function(e){return e.stopPropagation()},children:[Object(v.jsxs)("li",{children:[Object(v.jsx)("p",{children:"Scroll to top of a category"})," ",Object(v.jsx)("button",{className:"btn-close",onClick:s,children:Object(v.jsx)("i",{className:"fas fa-times"})})]}),Object(v.jsx)("div",{className:"divider"}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(e){return c(0,"todo")},children:"To do"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(e){return c(0,"in-progress")},children:"In Progress"})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{href:"#!",onClick:function(e){return c(0,"completed")},children:"Completed"})})]})})},T=(c(22),Object(n.createContext)(null));var A=function(){var e=Object(n.useState)({title:"",status:"",priority:""}),t=Object(l.a)(e,2),c=t[0],s=t[1],i=O(),r=i.tasks,d=i.isLoading,u=i.value,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"(max-width : 768px)",t=Object(n.useState)(!1),c=Object(l.a)(t,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){var t=window.matchMedia(e);i(t.matches),t.addEventListener("change",(function(e){i(e.matches)}))}),[i,e]),s}(),f=m(),b=Object(l.a)(f,2),p=b[0],x=b[1],y=Object(n.useMemo)((function(){var e=Object.keys(c).filter((function(e){return""!==c[e]}));return 0===e.length?r:r.filter((function(t){var n=!0,s=!0,i=!0;return e.includes("title")&&(n=t.title.toLowerCase().includes(c.title.trim().toLowerCase())),e.includes("status")&&(s=t.status===j[c.status]),e.includes("priority")&&(i=t.priority.toLowerCase()===c.priority.toLowerCase()),n&&s&&i}))}),[c,r]);return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)(T.Provider,{value:u,children:[Object(v.jsx)(g,{}),Object(v.jsx)(C,{filters:c,clearFilters:function(){s({title:"",status:"",priority:""})},setFilters:function(e,t){console.log("parent callback called",e,t),s(Object(o.a)(Object(o.a)({},c),{},Object(a.a)({},e,t)))}}),h&&Object(v.jsxs)("button",{className:"navbar",onClick:function(){return x(!0)},children:[Object(v.jsx)("i",{className:"fas fa-chevron-up"}),Object(v.jsx)("i",{className:"fas fa-chevron-down"})]}),d?Object(v.jsx)("div",{className:"loading",children:Object(v.jsx)("i",{className:"fas fa-circle-notch"})}):Object(v.jsx)("div",{className:"tasks-container",children:Object(v.jsxs)("div",{className:"tasks-grid-container",children:[Object(v.jsx)(S,{id:"todo",tasks:y.filter((function(e){return 0===e.status})),isMatching:h}),Object(v.jsx)(S,{id:"in-progress",tasks:y.filter((function(e){return 1===e.status})),isMatching:h}),Object(v.jsx)(S,{id:"completed",tasks:y.filter((function(e){return 2===e.status})),isMatching:h})]})})]}),p&&Object(v.jsx)(N,{closeModal:function(){return x(!1)}})]})};document.addEventListener("mousedown",(function(e){document.querySelectorAll(".show-menu").forEach((function(e){return e.classList.remove("show-menu")})),document.querySelectorAll(".btn-options").forEach((function(e){return e.classList.remove("active")}))})),r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(A,{})}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.560c9092.chunk.js.map